/* ========= Base Alpha: Single Source of Truth ========= */
:root{
  --color-primary:     #84dd63;  /* buttons, links, focus ring */
  --color-primary-600: #6baa75;  /* hover */
  --color-primary-700: #4a7b57;  /* active */
  --color-surface-1:   #121416;  /* page background */
  --color-surface-2:   #1b2024;  /* cards/panels */
  --color-border:      #30363d;  /* lines/borders */
  --color-text:        #eaf2ec;  /* global text colour */
  --input-bg:          #0f1517;  /* input background */
  --font-body: Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Arimo, Helvetica, Arial, sans-serif;
}

/* Legacy aliases (older CSS still uses these) */
:root{
  --lime-green:    var(--color-primary);
  --lime-600:      var(--color-primary-600);
  --lime-700:      var(--color-primary-700);
  --midnight-blue: var(--color-surface-1);
  --text:          var(--color-text);
  --border:        var(--color-border);
  --panel:         var(--color-surface-2);
  --panel-bg:      var(--color-surface-2);
}

/* ========= Globals ========= */
html, body { background: var(--color-surface-1); color: var(--color-text); font-family: var(--font-body); }
:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
a { color: var(--color-primary); }

/* Panels/cards */
.card, .panel { background: var(--color-surface-2); border: 1px solid var(--color-border); border-radius: 12px; }

/* Inputs */
input, select, textarea {
  background: var(--input-bg);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

/* ========= Buttons (primary) ========= */
.btn, button.btn {
  background: var(--color-primary);
  color: #0b0b0b;
  border: 1px solid transparent;
  border-radius: 10px;
  padding: .6rem .9rem;
  cursor: pointer;
  transition: background-color .12s ease, border-color .12s ease, transform .02s ease;
}
.btn:hover, button.btn:hover   { background: var(--color-primary-600); }
.btn:active, button.btn:active { background: var(--color-primary-700); transform: translateY(1px); }
.btn:focus-visible, button.btn:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
.btn:disabled, button.btn:disabled { opacity:.55; cursor:not-allowed; }

/* ========= Ghost buttons ========= */
.btn.ghost, button.btn.ghost {
  background: transparent;
  color: var(--color-primary);
  border: 1px solid var(--color-primary);
}
.btn.ghost:hover, button.btn.ghost:hover {
  background: color-mix(in srgb, var(--color-primary) 12%, transparent);
}
.btn.ghost:active, button.btn.ghost:active {
  background: color-mix(in srgb, var(--color-primary) 20%, transparent);
}

/* ========= Pills / Tabs ========= */
.pill, .tab {
  background: var(--color-surface-2);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 999px;
  padding: .45rem .8rem;
  cursor: pointer;
  transition: background-color .12s ease, border-color .12s ease, color .12s ease, transform .02s ease;
}
.pill:hover, .tab:hover {
  background: color-mix(in srgb, var(--color-primary) 10%, var(--color-surface-2));
  border-color: var(--color-primary);
}
.pill:active, .tab:active { transform: translateY(1px); }

/* Selected state used across modules (.active class) */
.pill.active, .tab.active, .pill[aria-selected="true"], .tab[aria-selected="true"] {
  background: var(--color-primary);
  color: #0b0b0b;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 35%, transparent) inset;
}
.pill.active::after, .tab.active::after {
  content: " ✓";
  font-weight: 700;
  margin-left: .25rem;
}

/* ========= Tiles (Home / Landing) ========= */
.tile, .tile-home-encounters, .tile-home-characters {
  background: var(--color-surface-2);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  transition: transform .06s ease, border-color .12s ease, box-shadow .12s ease;
}
.tile:hover,
.tile-home-encounters:hover,
.tile-home-characters:hover {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary);
  transform: translateY(-2px);
}
/* === THEME SAFETY GUARD — append to end of theme.css === */
html, body { background: var(--color-surface-1); color: var(--color-text); font-family: var(--font-body); }
:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

/* Buttons */
body .btn, body button.btn { background: var(--color-primary); color:#0b0b0b; border:1px solid transparent; border-radius:10px; }
body .btn:hover, body button.btn:hover { background: var(--color-primary-600); }
body .btn:active, body button.btn:active { background: var(--color-primary-700); }
body .btn:disabled, body button.btn:disabled { opacity:.55; cursor:not-allowed; }

/* Ghost buttons */
body .btn.ghost, body button.btn.ghost { background: transparent; color: var(--color-primary); border:1px solid var(--color-primary); }
body .btn.ghost:hover, body button.btn.ghost:hover { background: color-mix(in srgb, var(--color-primary) 12%, transparent); }
body .btn.ghost:active, body button.btn.ghost:active { background: color-mix(in srgb, var(--color-primary) 20%, transparent); }

/* Pills/Tabs */
body .pill, body .tab { background: var(--color-surface-2); color: var(--color-text); border:1px solid var(--color-border); border-radius:999px; }
body .pill:hover, body .tab:hover { background: color-mix(in srgb, var(--color-primary) 10%, var(--color-surface-2)); border-color: var(--color-primary); }
body .pill.active, body .tab.active,
body .pill[aria-selected="true"], body .tab[aria-selected="true"] {
  background: var(--color-primary); color:#0b0b0b; border-color: var(--color-primary);
}

/* Tiles (landing) */
body .tile, body .tile-home-encounters, body .tile-home-characters {
  background: var(--color-surface-2); border:1px solid var(--color-border); border-radius:14px;
}
body .tile:hover, body .tile-home-encounters:hover, body .tile-home-characters:hover {
  border-color: var(--color-primary); box-shadow:0 0 0 1px var(--color-primary);
}
